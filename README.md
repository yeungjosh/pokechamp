```
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•
â–ˆâ–ˆâ•‘     â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘
â•šâ•â•      â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•     â•šâ•â•â•šâ•â•
```
# PokÃ©mon Champion - Extended

<!-- project badges -->
[![Paper (ICML '25)](https://img.shields.io/badge/Paper-ICML-blue?style=flat)](https://openreview.net/pdf?id=SnZ7SKykHh)
[![Dataset on HuggingFace](https://img.shields.io/badge/Dataset-HuggingFace-brightgreen?logo=huggingface&logoColor=white&style=flat)](https://huggingface.co/datasets/milkkarten/pokechamp)
[![Original Code](https://img.shields.io/badge/Original-GitHub-black?logo=github&logoColor=white&style=flat)](https://github.com/sethkarten/pokechamp)


## Project Overview

This repository extends the original **PokÃ©Champ** framework (ICML 2025 paper: "PokÃ©Champ: an Expert-level Minimax Language Agent") with additional battle agents, comprehensive testing infrastructure, and enhanced documentation.

### What We Built On Top

**Original PokÃ©Champ Framework:**
- Expert-level minimax language agent for competitive PokÃ©mon
- LLM-based battle decision making
- Multi-generation format support (Gen 1-9)
- Bayesian prediction system
- 2M+ battle dataset

**Our Extensions:**
- **Gen1 Heuristic Agent** - Custom bot achieving 100% win rate vs max_power baseline
- **Portfolio Testing Suite** - Comprehensive test framework with 70+ battle scenarios
- **Enhanced Documentation** - 2000+ lines covering mechanics, architecture, and usage
- **Competition Setup Guides** - Quickstart guides and ladder scripts
- **Custom Teams** - Hand-crafted competitive teams for Gen1 OU format
- **ğŸ® Web Showcase Application** - Interactive web UI for live battle simulations and agent comparisons

<div align="center">
  <img src="./resource/method.png" alt="PokemonChamp">
</div>

## System Architecture

### High-Level Overview

The system is built on a layered architecture separating the battle engine, AI agents, and external integrations:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BATTLE INTERFACE LAYER                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Local Battlesâ”‚  â”‚ Showdown     â”‚  â”‚ Human Interface    â”‚   â”‚
â”‚  â”‚ (1v1, VGC)   â”‚  â”‚ Ladder       â”‚  â”‚ (Interactive Play) â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AI AGENT LAYER                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   LLM-Based Agents   â”‚  â”‚   Heuristic Agents           â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ PokÃ©Champ        â”‚ â”‚  â”‚ â”‚ Gen1 Agent (NEW)         â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ (Minimax+LLM)    â”‚ â”‚  â”‚ â”‚ - Damage calculator      â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚ - Position evaluator     â”‚ â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”‚ - Switch logic           â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ PokÃ©llmon        â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚ â”‚ (Prompt Algos)   â”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ - CoT, SC, ToT   â”‚ â”‚  â”‚ â”‚ Baseline Bots            â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ - MCP Protocol   â”‚ â”‚  â”‚ â”‚ - Abyssal, MaxPower      â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚ - Random, OneStep        â”‚ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PREDICTION & ANALYSIS LAYER                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Bayesian Predictor   â”‚  â”‚ Battle Translator            â”‚   â”‚
â”‚  â”‚ - Team prediction    â”‚  â”‚ - State parsing              â”‚   â”‚
â”‚  â”‚ - Move prediction    â”‚  â”‚ - Format conversion          â”‚   â”‚
â”‚  â”‚ - Stats inference    â”‚  â”‚ - Action translation         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BATTLE ENGINE LAYER                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              poke_env (Core Engine)                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚ Battle     â”‚ â”‚ Pokemon     â”‚ â”‚ Damage           â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ State      â”‚ â”‚ Stats/Moves â”‚ â”‚ Calculation      â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚ Type Chart â”‚ â”‚ Items/      â”‚ â”‚ Format           â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Gen1-9     â”‚ â”‚ Abilities   â”‚ â”‚ Rules            â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DATA & LLM BACKENDS                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Dataset      â”‚  â”‚ OpenRouter   â”‚  â”‚ Direct APIs        â”‚   â”‚
â”‚  â”‚ (2M battles) â”‚  â”‚ (100+ models)â”‚  â”‚ (OpenAI, Gemini)   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Directory Structure

```
pokechamp/
â”œâ”€â”€ pokechamp/           # [CORE] LLM player implementation
â”‚   â”œâ”€â”€ llm_player.py    # Base LLM player class
â”‚   â”œâ”€â”€ mcp_player.py    # Model Context Protocol support
â”‚   â”œâ”€â”€ llm_vgc_player.py # VGC doubles format support
â”‚   â”œâ”€â”€ gpt_player.py    # OpenAI GPT backend
â”‚   â”œâ”€â”€ llama_player.py  # Meta LLaMA backend
â”‚   â”œâ”€â”€ gemini_player.py # Google Gemini backend
â”‚   â”œâ”€â”€ openrouter_player.py # OpenRouter unified API
â”‚   â”œâ”€â”€ prompts.py       # Battle prompts & algorithms (CoT, SC, ToT, Minimax)
â”‚   â””â”€â”€ translate.py     # Battle state translation utilities
â”‚
â”œâ”€â”€ bots/                # [BOTS] Custom agent implementations
â”‚   â”œâ”€â”€ gen1_agent.py    # â­ NEW: Gen1 heuristic agent (730 lines)
â”‚   â”‚                    #   - Exact Gen1 damage calculator
â”‚   â”‚                    #   - Position evaluator (7+ factors)
â”‚   â”‚                    #   - Advanced switch logic
â”‚   â”‚                    #   - 100% win rate vs max_power
â”‚   â”œâ”€â”€ starter_kit_bot.py # Template for custom bots
â”‚   â””â”€â”€ ...              # Other custom implementations
â”‚
â”œâ”€â”€ bayesian/            # [PREDICT] Bayesian prediction system
â”‚   â”œâ”€â”€ pokemon_predictor.py    # Team prediction (unrevealed Pokemon)
â”‚   â”œâ”€â”€ team_predictor.py       # Bayesian team inference
â”‚   â””â”€â”€ live_battle_predictor.py # Real-time battle predictions
â”‚
â”œâ”€â”€ scripts/             # [SCRIPTS] Battle execution & evaluation
â”‚   â”œâ”€â”€ battles/         # Battle runners
â”‚   â”‚   â”œâ”€â”€ local_1v1.py       # Local bot vs bot battles
â”‚   â”‚   â”œâ”€â”€ human_agent_1v1.py # Human vs bot interface
â”‚   â”‚   â””â”€â”€ showdown_ladder.py # Online ladder play
â”‚   â”œâ”€â”€ evaluation/      # Performance analysis
â”‚   â”‚   â””â”€â”€ evaluate_gen9ou.py # Cross-evaluation suite
â”‚   â””â”€â”€ training/        # Dataset processing
â”‚       â””â”€â”€ battle_translate.py # Battle data translation
â”‚
â”œâ”€â”€ poke_env/            # [ENGINE] Core battle engine (LLM-independent)
â”‚   â”œâ”€â”€ environment/     # Battle state management
â”‚   â”œâ”€â”€ player/          # Player interface
â”‚   â”œâ”€â”€ data/            # Pokemon data (Gen1-9)
â”‚   â””â”€â”€ teambuilder/     # Team construction
â”‚
â”œâ”€â”€ tests/               # [TESTS] Comprehensive test suite
â”‚   â”œâ”€â”€ test_bayesian_prediction.py
â”‚   â”œâ”€â”€ test_move_normalization.py
â”‚   â”œâ”€â”€ test_team_loader.py
â”‚   â””â”€â”€ test_agent_portfolio.py  # â­ NEW: 70+ battle test suite
â”‚
â”œâ”€â”€ teams/               # Pre-built competitive teams
â”‚   â”œâ”€â”€ gen1ou_balanced.txt      # â­ NEW: Custom Gen1 team
â”‚   â”œâ”€â”€ gen1ou_offensive.txt     # â­ NEW: Offensive Gen1 team
â”‚   â””â”€â”€ gen1ou_sleep_focus.txt   # â­ NEW: Sleep control team
â”‚
â””â”€â”€ docs/                # â­ NEW: Enhanced documentation
    â”œâ”€â”€ GEN1_AGENT_DOCUMENTATION.md     # Agent architecture (714 lines)
    â”œâ”€â”€ GEN1_RBY_MECHANICS_RESEARCH.md  # Gen1 mechanics (977 lines)
    â”œâ”€â”€ GEN1_QUICK_REFERENCE.md         # Quick lookup guide
    â”œâ”€â”€ VERIFIED_TEST_RESULTS.md        # Battle test logs
    â”œâ”€â”€ PORTFOLIO_TESTING.md            # Testing documentation
    â””â”€â”€ QUICKSTART.md                   # 5-minute setup guide
```

### Architecture Principles

**1. Separation of Concerns**
- Battle engine (`poke_env`) is completely LLM-independent
- AI agents are modular and interchangeable
- Easy to add new agents without modifying core engine

**2. Extensibility**
- Plugin architecture for new LLM backends
- Custom bot system via inheritance
- Multiple prompt algorithms (CoT, SC, ToT, MCP, Minimax)

**3. Multi-Format Support**
- Gen1-9 competitive formats
- Singles (OU, Ubers, etc.) and Doubles (VGC)
- Format-specific rules and mechanics

**4. Testing & Evaluation**
- Comprehensive test suite (100+ tests)
- Cross-evaluation framework
- Battle logging and analysis tools

### Data Flow Example

```
User Request: "Battle gen1_agent vs abyssal in Gen1 OU"
     â†“
local_1v1.py: Initialize battle with format=gen1ou
     â†“
poke_env: Create battle state, load Gen1 mechanics
     â†“
gen1_agent.choose_move():
  1. Calculate damage for all moves (Gen1 formula)
  2. Evaluate position (material, status, threats)
  3. Score switch options (survival, matchups)
  4. Return best action
     â†“
poke_env: Execute action, update battle state
     â†“
Opponent turn (abyssal logic)
     â†“
Repeat until battle ends
     â†“
Return: Battle result, turn count, replay
```

## Quick Start

### Requirements

```sh
# Install uv (modern Python package manager)
curl -LsSf https://astral.sh/uv/install.sh | sh

# Clone and setup
git clone https://github.com/sethkarten/pokechamp.git
cd pokechamp
uv sync
```

### Battle Any Agent Against Any Agent
```sh
# Basic battle
uv run python local_1v1.py --player_name pokechamp --opponent_name abyssal

# Try MCP integration
uv run python local_1v1.py --player_prompt_algo mcp --player_backend gemini-2.5-flash --opponent_name abyssal

# VGC double battles
uv run python run_with_timeout_vgc.py --continuous --max-concurrent 2
```

### Evaluation
```sh
uv run python scripts/evaluation/evaluate_gen9ou.py
```

### ğŸ® Web Showcase Application

Launch the interactive web interface to watch battles in real-time:

```sh
# Start the web application
uv run python webapp/app.py

# Open your browser to http://localhost:5000
```

**Features:**
- ğŸ¤– **Live Battle Simulation** - Watch agents battle with turn-by-turn visualization
- ğŸ“Š **Agent Showcase** - Compare different AI strategies and performance
- ğŸ“ˆ **Statistics Dashboard** - Track win rates and battle history
- ğŸ¨ **Interactive UI** - Pokemon-themed design with animations

See [webapp/README.md](webapp/README.md) for detailed documentation.

## Battle Configuration

### Local PokÃ©mon Showdown Server Setup

1. Install Node.js v10+
2. Set up the battle server:

```sh
git clone git@github.com:jakegrigsby/pokemon-showdown.git
cd pokemon-showdown
npm install
cp config/config-example.js config/config.js
node pokemon-showdown start --no-security
```

3. Open http://localhost:8000/ in your browser

## Available Bots

### Built-in Bots
- `pokechamp` - Main PokÃ©Champ agent using minimax algorithm
- `pokellmon` - LLM-based agent with various prompt algorithms
- `abyssal` - Abyssal Bot baseline
- `max_power` - Maximum base power move selection
- `one_step` - One-step lookahead agent
- `random` - Random move selection
- `vgc` - VGC-specialized agent for double battles

### Custom Bots
- `starter_kit` - Example LLM-based bot for creating custom implementations

### Prompt Algorithms
Available prompt algorithms for LLM-based bots:
- `io` - Input/Output prompting (default)
- `sc` - Self-consistency prompting
- `cot` - Chain-of-thought prompting
- `tot` - Tree-of-thought prompting
- `minimax` - Minimax algorithm with LLM evaluation
- `heuristic` - Heuristic-based decisions
- `max_power` - Maximum base power move selection
- `one_step` - One-step lookahead
- `random` - Random move selection
- `mcp` - Model Context Protocol integration

### Creating Custom Bots

1. Create `bots/my_bot_bot.py`
2. Inherit from `LLMPlayer`:

```python
from pokechamp.llm_player import LLMPlayer

class MyCustomBot(LLMPlayer):
    def choose_move(self, battle):
        # Implement your strategy
        return self.choose_random_move(battle)
```

3. Your bot automatically becomes available in battle scripts

## LLM Backend Support

The system supports multiple LLM backends through OpenRouter, providing access to hundreds of models:

### Supported Providers
- **OpenAI**: `gpt-4o`, `gpt-4o-mini`, `gpt-4-turbo`, `gpt-4`, `gpt-3.5-turbo`
- **Anthropic**: `anthropic/claude-3.5-sonnet`, `anthropic/claude-3-opus`, `anthropic/claude-3-haiku`
- **Google**: `google/gemini-pro`, `gemini-2.0-flash`, `gemini-2.0-pro`, `gemini-2.5-flash`, `gemini-2.5-pro`
- **Meta**: `meta-llama/llama-3.1-70b-instruct`, `meta-llama/llama-3.1-8b-instruct`
- **Mistral**: `mistralai/mistral-7b-instruct`, `mistralai/mixtral-8x7b-instruct`
- **Cohere**: `cohere/command-r-plus`, `cohere/command-r`
- **Perplexity**: `perplexity/llama-3.1-sonar-small-128k`, `perplexity/llama-3.1-sonar-large-128k`
- **DeepSeek**: `deepseek-ai/deepseek-coder-33b-instruct`, `deepseek-ai/deepseek-llm-67b-chat`
- **Microsoft**: `microsoft/wizardlm-2-8x22b`, `microsoft/phi-3-medium-128k-instruct`
- **Local via Ollama**: `ollama/llama3.1:8b`, `ollama/mistral`, `ollama/qwen2.5`, `ollama/gemma3:4b`, `ollama/gpt-oss:20b`

### Setup
1. Get your API key from [OpenRouter](https://openrouter.ai/keys)
2. `export OPENROUTER_API_KEY='your-api-key-here'`
3. Use any supported model:

```sh
# Claude vs Gemini battle
uv run python local_1v1.py --player_backend anthropic/claude-3-haiku --opponent_backend gemini-2.5-flash

# Test different models
uv run python local_1v1.py --player_backend mistralai/mixtral-8x7b-instruct --opponent_backend gpt-4o

# Local models (no API key needed)
uv run python local_1v1.py --player_backend ollama/llama3.1:8b --opponent_name abyssal
```

## Bayesian Prediction System

The codebase includes a sophisticated Bayesian predictor for real-time battle analysis:

### Features
- **Team Prediction**: Predict unrevealed opponent Pokemon
- **Move Prediction**: Predict opponent moves and items
- **Stats Prediction**: Predict EVs, natures, and hidden stats
- **Live Integration**: Real-time predictions during battles

### Usage
```python
from bayesian.pokemon_predictor import PokemonPredictor

predictor = PokemonPredictor()
predictions = predictor.predict_teammates(
    revealed_pokemon=["Kingambit", "Gholdengo"],
    max_predictions=5
)
```

### Live Battle Predictions
```sh
uv run python bayesian/live_battle_predictor.py
```

Shows turn-by-turn Bayesian predictions with probabilities for unrevealed Pokemon, predicted moves, items, and EVs.

## Battle Execution

### Local 1v1 Battles
```sh
# Basic battle
uv run python scripts/battles/local_1v1.py --player_name pokechamp --opponent_name abyssal

# Custom backends
uv run python scripts/battles/local_1v1.py --player_name starter_kit --player_backend gpt-4o

# MCP integration
uv run python local_1v1.py --player_prompt_algo mcp --player_backend gemini-2.5-flash --opponent_name abyssal
```

### VGC Double Battles
```sh
# VGC tournament
uv run python run_with_timeout_vgc.py --continuous --max-concurrent 2

# Single VGC battle
uv run python local_1v1.py --battle_format gen9vgc2025regi --player_name pokechamp --opponent_name abyssal
```

### Human vs Agent
```sh
uv run python scripts/battles/human_agent_1v1.py
```

### Ladder Battles
```sh
uv run python scripts/battles/showdown_ladder.py --USERNAME $USERNAME --PASSWORD $PASSWORD
```

## Evaluation & Analysis

### Cross-Evaluation
```sh
uv run python scripts/evaluation/evaluate_gen9ou.py
```

Runs battles between all agents and outputs:
- Win rates matrix
- Elo ratings
- Average turns per battle

### Dataset Processing
```sh
uv run python scripts/training/battle_translate.py --output data/battles.json --limit 5000 --gamemode gen9ou
```

## Dataset

The PokÃ©Champ dataset contains over 2 million competitive PokÃ©mon battles across 37+ formats.

### Dataset Features
- **Size**: 2M clean battles (1.9M train, 213K test)
- **Formats**: Gen 1-9 competitive formats
- **Skill Range**: All Elo ranges (1000-1800+)
- **Time Period**: Multiple months (2024-2025)

### Usage
```python
from datasets import load_dataset
from scripts.training.battle_translate import load_filtered_dataset

# Load filtered dataset
filtered_dataset = load_filtered_dataset(
    min_month="January2025",
    max_month="March2025", 
    elo_ranges=["1600-1799", "1800+"],
    split="train",
    gamemode="gen9ou"
)
```

## Testing

Run the comprehensive test suite:

```sh
# All tests
uv run pytest tests/

# Specific test categories  
uv run pytest tests/ -m bayesian      # Bayesian functionality
uv run pytest tests/ -m moves         # Move normalization
uv run pytest tests/ -m teamloader    # Team loading
```

The test suite includes:
- [OK] Bayesian prediction accuracy (100% success rate)
- [OK] Move normalization (284 unique moves tested)
- [OK] Team loading and rejection handling
- [OK] Bot system integration
- [OK] Core battle engine functionality

## Reproducing Paper Results

### Gen 9 OU Evaluation
```sh
uv run python scripts/evaluation/evaluate_gen9ou.py
```

This runs the full cross-evaluation between PokÃ©Champ and baseline bots, outputting win rates, Elo ratings, and turn statistics as reported in the paper.

### Action Prediction Benchmark (Coming Soon)
```sh
uv run python evaluate_action_prediction.py
```

## Acknowledgments

## Citation

```bibtex
@article{karten2025pokechamp,
  title={PokÃ©Champ: an Expert-level Minimax Language Agent},
  author={Karten, Seth and Nguyen, Andy Luu and Jin, Chi},
  journal={arXiv preprint arXiv:2503.04094},
  year={2025}
}

@inproceedings{karten2025pokeagent,
  title        = {The PokeAgent Challenge: Competitive and Long-Context Learning at Scale},
  author       = {Karten, Seth and Grigsby, Jake and Milani, Stephanie and Vodrahalli, Kiran
                  and Zhang, Amy and Fang, Fei and Zhu, Yuke and Jin, Chi},
  booktitle    = {NeurIPS Competition Track},
  year         = {2025},
  month        = apr,
}
```
